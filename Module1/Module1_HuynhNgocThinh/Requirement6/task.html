<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    let listCustomers = [];

    class Customer {
        constructor(name, idnum, date, email, addr, typecus, discount, numpeo, rentDay, typeservices, typeroom) {
            this.name = name;
            this.idnum = idnum;
            this.date = date;
            this.email = email;
            this.addr = addr;
            this.typecus = typecus;
            this.discount = discount;
            this.numpeo = numpeo;
            this.rentDay = rentDay;
            this.typeservices = typeservices;
            this.typeroom = typeroom;
            this.bill;
        }

        getname() {
            return this.name = name;
        }

        getId() {
            return this.id = idnum;
        }

        getDate() {
            return this.date = date;
        }

        getEmail() {
            return this.email = email;
        }

        getAddr() {
            return this.addr = addr;
        }

        getTypecus() {
            return this.typecus = typecus;
        }

        getDiscount() {
            return this.discount = discount;
        }

        getNumpeo() {
            return this.numpeo = numpeo;
        }

        getRentday() {
            return this.rentDay = rentDay;
        }

        getTypeservices() {
            return this.typeservices = typeServices;
        }

        getTyperoom() {
            return this.typeroom = typeRoom;
        }

        getInfo() {
            return "Name: " + this.name + "\n" +
                "Address: " + this.addr + "\n" +
                "ID: " + this.idnum + "\n" +
                "Date of birth: " + this.date + "\n" +
                "Email: " + this.email + "\n" +
                "Customer :" + this.typecus + "\n" +
                "Amount of people: " + this.numpeo + "\n" +
                "Day of rent: " + this.rentDay + "\n" +
                "Type of services: " + this.typeservices + "\n" +
                "Type of room: " + this.typeroom + "\n" +
                "Discount: " + this.discount + "\n"

        }

        setName(name) {
            return this.name = name;
        }

        setID(idnum) {
            return this.idnum = idnum;
        }

        setAddr(addr) {
            return this.addr = addr;
        }

        setDate(date) {
            return this.date = date
        }

        setEmail(email) {
            return this.email = email;
        }

        setTypecus(typecus) {
            return this.typecus = typecus;
        }

        setTypeservices(typeservices) {
            return this.typeservices = typeservices;
        }

        setTyperoom(typeroom) {
            return this.typeroom = typeroom;
        }

        setDiscount(discount) {
            return this.discount = discount;
        }

        setNumpeo(numpeo) {
            return this.numpeo = numpeo;
        }

        setRentday(rentday) {
            return this.rentDay = rentday;
        }

        pay() {
            let money = 0;
            switch (this.typeroom) {

                case 'Villa':
                    money = parseInt(500);
                    break;
                case 'House':
                    money = parseInt(300);
                    break;
                case 'Room':
                    money = parseInt(100);
                    break;
                default:
                    alert("Enter again");
            }
            return this.bill = money * this.rentDay * (1 - this.discount / 100);

        }


    }


    // ===========================================================================

    menu();

    function menu() {
        let menuList = prompt("1. Add new customer \n 2. Delete customer \n 3. Show information\n 4.Edit\n 5.Display total pay of customer \n 6.Exit");
        switch (menuList) {
            case "1":
                addNewCus();
                break;
            case "2":
                delCus();
                break;
            case "3":
                showInfor();
                break;
            case "4":
                edit();
                break;
            case "5":
                totalPay();
                break;
            case "6":


        }
    }

    function addNewCus() {
        // numCustomer = prompt("Enter number of customer:");
        // for (let i = 0; i < numCustomer; i++) {

        let name = prompt("Nhập tên:");

        let check = false;
        let idnum;
        do {
            idnum = prompt("Enter the ID number:");
            if (!isNaN(idnum)) {
                idnum = Number.parseFloat(idnum);
            }
            if (!Number.isInteger(idnum)) {
                continue;
            }
            if (idnum < 10000000 || idnum > 99999999) {
                continue;
            }
            check = true;
        }
        while (!check);
        check = false;
        let date = prompt("Nhập ngày sinh theo định dạng DD/MM/YYYY:");
        while (!(/^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/).test(date)) {
            alert("Mời nhập lại ngày sinh");
            date = prompt("Nhập ngày sinh theo định dạng DD/MM/YYYY:");
        }
        let email = prompt("Nhập Email:");
        while (!(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(email))) {
            alert("Email không đúng định dạng");
            email = prompt("Nhập Email:");
        }
        let addr = prompt("Nhập địa chỉ:");
        let typecus = prompt("Nhập loại customer:");
        let numpeo = prompt("Nhập số người đi kèm:");
        while (!(/^\+?(0|[1-9]\d*)$/).test(numpeo)) {
            alert("Nhập lại");
            numpeo = prompt("Nhập số người đi kèm:");
        }
        let rentday = prompt("Nhập ngày thuê:");
        while (!(/^\+?(0|[1-9]\d*)$/).test(rentday)) {
            alert("Nhập lại");
            rentday = prompt("Nhập ngày thuê:");

        }
        let typeservices = prompt("Nhập loại dịch vụ:");
        let typeroom = prompt("Nhập loại phòng:");

        let discount = prompt("Nhập discount:");

        let customer = new Customer(name, idnum, date, email, addr, typecus, discount, numpeo, rentday, typeservices, typeroom);
        listCustomers.push(customer);
        // return alert(customer.getInfo());

        menu();
    }


    function delCus() {
        let text = "";
        for (let i = 0; i < listCustomers.length; i++) {
            text += (i + 1) + " " + listCustomers[i].name + "  ";
        }
        let choose = prompt("Enter the number of customer you want to remove:\n" + text);
        listCustomers.splice(choose - 1, 1);
        menu();
    }

    function edit() {
        let text = "";
        for (let i = 0; i < listCustomers.length; i++) {
            text += (i + 1) + " " + listCustomers[i].name + "  ";
        }

        let choose1 = prompt("Enter the number of customer you want to edit:\n" + text);
        let choose2 = prompt("Thông tin khách hàng " + (choose1) + ":" + "\n" +
            "1.Name: " + listCustomers[choose1 - 1].name + "\n" +
            "2.Address: " + listCustomers[choose1 - 1].addr + "\n" +
            "3.ID: " + listCustomers[choose1 - 1].idnum + "\n" +
            "4.Date of birth: " + listCustomers[choose1 - 1].date + "\n" +
            "5.Email: " + listCustomers[choose1 - 1].email + "\n" +
            "6.Customer: " + listCustomers[choose1 - 1].customer + "\n" +
            "7.Amount of people: " + listCustomers[choose1 - 1].numpeo + "\n" +
            "8.Day of rent: " + listCustomers[choose1 - 1].rentday + "\n" +
            "9.Type of services: " + listCustomers[choose1 - 1].typeservices + "\n" +
            "10.Type of room: " + listCustomers[choose1 - 1].typeroom + "\n"+
            "10.Discount: " + listCustomers[choose1 - 1].discount + "\n");
        switch (choose2) {
            case "1":
                listCustomers[choose1 - 1].name = prompt("Enter name:");
                break;
            case "2":
                listCustomers[choose1 - 1].addr = prompt("Enter address :");
                break;
            case "3":
                listCustomers[choose1 - 1].idnum = prompt("Enter ID:");
                break;
            case "4":
                listCustomers[choose1 - 1].date = prompt("Enter birthday:\nFormat: mm/dd/yyyy");
                break;
            case "5":
                listCustomers[choose1 - 1].email = prompt("Enter email:");
                break;
            case "6":
                listCustomers[choose1 - 1].typecus = prompt("Nhập lại loại Customer:\nDiamond, Platinum, Gold, Silver, Member");
                break;
            case "7":
                listCustomers[choose1 - 1].numpeo = prompt("Enter people:");
                break;
            case "8":
                listCustomers[choose1 - 1].rentday = prompt("Enter rent days:");
                break;
            case "9":
                listCustomers[choose1 - 1].typeservices = prompt("Enter types of services:\nVilla: 500$/1 ngày\nHouse: 300$/1 ngày\nRoom: 100$/1 ngày");
                break;
            case "10":
                listCustomers[choose1 - 1].typeroom = prompt("Enter room:\nVip, Business, Normal");
                break;
            default:
                alert("Failed");
                break;
        }
        showInfor();
    }

    function totalPay(){
        let text = "";
        for (let i = 0; i < listCustomers.length; i++) {
            text += (i + 1) + " " + listCustomers[i].name + "  ";
        }

        let choose1 = prompt("Enter the number of customer you want to show total pay\n" + text);
        let totalpay= listCustomers[choose1-1].pay();
        alert("Customer:"+listCustomers[choose1-1].name+"\n"+
                "Total pay : "+totalpay
        );
        menu();

    }

    function showInfor() {

        let text = "";
        for (let i = 0; i < listCustomers.length; i++) {
            text += (i + 1) + " " + listCustomers[i].name + "  ";
        }
        let choose1 = prompt("Enter the number of customer you want to show:\n" + text);
        alert("Thông tin khách hàng " + (choose1) + ":" + "\n" +
            "Name: " + listCustomers[choose1 - 1].name + "\n" +
            "Address: " + listCustomers[choose1 - 1].addr + "\n" +
            "ID: " + listCustomers[choose1 - 1].idnum + "\n" +
            "Date of birth: " + listCustomers[choose1 - 1].date + "\n" +
            "Email: " + listCustomers[choose1 - 1].email + "\n" +
            "Customer " + listCustomers[choose1 - 1].typecus + "\n" +
            "Amount of people: " + listCustomers[choose1 - 1].numpeo + "\n" +
            "Day of rent: " + listCustomers[choose1 - 1].rentDay + "\n" +
            "Type of services: " + listCustomers[choose1 - 1].typeservices + "\n" +
            "Type of room: " + listCustomers[choose1 - 1].typeroom + "\n");

        menu();
    }


</script>

</body>
</html>